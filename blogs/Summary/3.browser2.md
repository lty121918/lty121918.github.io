---
title: 知识总结（三）浏览器基础知识 ·下
date: 2022-02-15
tags:
 - 浏览器
sidebar: 'auto'
categories:
 - 前端相关
 - 知识总结
---

## 从输入 URL 到页面加载完成的过程中都发生了什么事情？

## 垃圾回收机制GC

JS内存垃圾回收使用的算法：

+ 引用计数（之前，会有循环引用的问题）
+ 标记清除（现在）

## 进程和线程

进程，OS进行资源分配和调度的最小单位，有独立内存空间；

线程，OS进行匀速那调度的最小单位，共享进程内存空间；

JS是单线程的，但可以开启多进程执行，如WebWorker；



## cookie和token

**cookie**

- HTTP无状态，每次请求都要带cookie，以帮助识别身份；
- 服务端也可以向客户端set-cookie，cookie大小限制为4k；
- 默认有跨域限制：不可跨域共享、传递cookie；
- HTML5之前常被用于本地储存，之后推荐使用localStorage和sessionStorage；

**cookie和session**

+ cookie用于登陆验证，存储用户标识（如userId）
+ session在服务端，存储用户详细信息，和cookie信息一一对应；
+ cookie+session是常见的登陆验证解决方案；



![](https://gitee.com/ekzodia_lty/blog-image/raw/master/img/d774a34a76d006cd4d86d0c701049e8.png)

**现代浏览器开始禁止第三方cookie**

+ 和跨域限制不同，这里是：禁止网页引入第三方JS设置cookie；
+ 打击第三方广告，保护用户隐私；
+ 新增SameSite：Strict/Lax/None;值可自己选择。

**token VS cookie**

+ cookie是HTTP规范，而token是自定义传递；
+ cookie会默认被浏览器存储，而token需自己储存；
+ token默认没有跨域限制；

**JWT（JSON Web Token）**

+ 可以代替cookie+session的方案；
+ 前端发起登录，后端验证成功之后，返回一个加密的token；
+ 前端自行存储token（其中包含了被加密的用户信息）；
+ 以后访问服务端接口，都携带这个token作为用户信息；

**JWT的优点**

+ 不占用服务端内存；
+ 多进程、多服务器不受影响；
+ 没有跨域限制；

**JWT的缺点**

+ 用户信息储存在客户端，无法快速封禁某用户；
+ 万一服务端密钥被泄露，则用户数据全部丢失；
+ token体积一般大于cookie，会增加请求的数量；

## localStorage 和 sessionStorage

- HTML5 专门为存储来设计的，最大可存 5M。
- API 简单易用， setItem getItem。
- 不会随着 http 请求被发送到服务端。

它们的区别：

- localStorage 数据会永久存储，除非代码删除或手动删除。
- sessionStorage 数据只存在于当前会话，浏览器关闭则清空。
- 一般用 localStorage 会多一些。

> 参考链接：
>
> [JavaScript事件代理（事件委托）_越努力，越幸运！-CSDN博客_事件委托](https://blog.csdn.net/qq_38128179/article/details/86293394)
>
> [从输入 URL 到页面加载完成的过程中都发生了什么事情？ - FEX (baidu.com)](http://fex.baidu.com/blog/2014/05/what-happen/)
>
> [「硬核JS」你真的了解垃圾回收机制吗 - 掘金 (juejin.cn)](https://juejin.cn/post/6981588276356317214#heading-0)

